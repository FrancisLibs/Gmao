{% extends 'base.html.twig' %}

{% block title %}Edition bon de travail{% endblock %}

{% block body %}
    <div class="row mt-5">
        <div class="col-8 offset-2">
            <div class="row align-items-center">
                <div class="col-6">
                    <h2>Edition bon de travail préventif</h2>
                </div>
                <div class="d-flex justify-content-start">
                    <a class="btn btn-primary btn-sm me-3" href="{{ path('template_index') }}" role="button">Liste des préventifs</a>
                    {% if is_granted('ROLE_ADMIN') %}
                        {{ include('preventive/_delete_form.html.twig') }}
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
    <article class="row">
         <aside class="col-2">
            {% include 'user/_photo.html.twig' %}
        </aside>
        <div class="col-8 mt-4">
            <div class="row mt-3">
                <div class="col-2 text-primary">
                    <h4>Machine(s)</h4>
                </div>
                <div class="col-2">
                    <a class="btn btn-primary btn-sm" href="{{ path('machine_index', {'documentId': template.id, 'mode': mode}) }}" role="button">Ajouter machine</a>
                </div>
                 <div class="inline-flex justify-content-start">
                    {% for machine in template.machines %}
                        <div class="d-flex justify-content-start align-items-center border border-dark rounded mb-1 p-1">
                            <span>{{ machine.designation }}</span>
                            <a href="{{ path('preventive_machine_remove', {'id': template.id, 'machine': machine.id })}}" class="ml-2  btn btn-warning btn-sm">Supp</a>
                        </div>
                    {% endfor %}
                </div>
            </div>
            {{ include('preventive/_form.html.twig') }}
        </div>
    </article>
{% endblock %}
{% block javascripts %}
    {{ parent() }}
    {{ encore_entry_script_tags('editWorkorder') }}
{% endblock %}