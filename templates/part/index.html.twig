{% extends 'base.html.twig' %}

{% block title %}Pièces détachées{% endblock %}

{% block body %}
    <main class="row mt-4 part-js-filter" >
        <div class="col-12">
            <div class="row">
                <div class="col-3 offset-2">
                    <h3>Pièces détachées</h3>
                </div>
            </div>
            <div class="row mt-4">
                <aside class="col-2">
                    <section>
                        <div class="d-flex flex-column">
                            <a class="btn btn-primary btn-sm mb-3 px-4 w-50" href="{{ path('part_new') }}" role="button">Nouvelle pièce</a>
                            {% if is_granted('ROLE_ADMIN') %}
                                <a class="btn btn-primary btn-sm w-50 mb-4" href="{{ path('reception_part') }}" role="button">Réception</a>
                            {% endif %}
                        </div>
                        {% include 'part/_filter.html.twig' %}
                    </section>
                    <section class="text-center mt-3 d-flex flex-column ">
                        {% if app.user.imageName %}
                            <img src="{{ vich_uploader_asset(app.user, 'imageFile') | imagine_filter('my_middle_filter') }}" alt="Photo d'identité de {{ app.user.username }}" />
                        {% else %}
                            <img src="{{ asset('/images/technicien.jpg') | imagine_filter('my_middle_filter') }}" alt="Photo d'identité de {{ app.user.username }}" />
                        {% endif %}
                        <div class="mt-2 border borer-danger rounded">
                            {{ app.user.firstName ~ " " ~ app.user.lastName }}
                        </div>
                    </section>

                </aside>
                <section class="col-10">
                    {% include 'part/_partList.html.twig' with {parts: parts} only %}
                </section>
            </div>
            {# display navigation #}
            <div class="row mt-4">
                <div class="col-4 offset-2 navigation js-filter-pagination">
                    {% include 'part/_pagination.html.twig' %}
                </div>
            </div>
        </article>
    </main>
{% endblock %}
{% block javascripts %}
    {{ parent() }}
    {{ encore_entry_script_tags('part') }}
{% endblock %}
